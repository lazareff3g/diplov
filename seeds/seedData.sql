-- seeds/seedData.sql

-- Отключаем проверки внешних ключей временно
SET session_replication_role = replica;

-- Очистка всех таблиц
TRUNCATE TABLE photos, reviews, location_tags, locations, profile_images, tags, categories, users RESTART IDENTITY CASCADE;

-- Включаем проверки внешних ключей обратно
SET session_replication_role = DEFAULT;

-- Вставка пользователей
INSERT INTO users (username, email, password, role) VALUES
('admin', 'admin@photolocations.ru', '$2b$10$hash1', 'admin'),
('photographer1', 'photo1@example.com', '$2b$10$hash2', 'user'),
('photographer2', 'photo2@example.com', '$2b$10$hash3', 'user'),
('explorer', 'explorer@example.com', '$2b$10$hash4', 'user');

-- Вставка категорий
INSERT INTO categories (name, description) VALUES
('Природа', 'Парки, леса, водоемы и природные ландшафты'),
('Архитектура', 'Исторические здания, современная архитектура'),
('Городские виды', 'Панорамы города, улицы, площади'),
('Портретная съемка', 'Места для портретной и fashion фотографии'),
('Закаты и рассветы', 'Лучшие места для съемки золотого часа'),
('Ночная съемка', 'Локации для ночной фотографии');

-- Вставка тегов
INSERT INTO tags (name) VALUES
('панорама'), ('река'), ('парк'), ('мост'), ('церковь'),
('небоскребы'), ('фонтан'), ('музей'), ('памятник'), ('сад'),
('отражения'), ('закат'), ('рассвет'), ('ночь'), ('подсветка'),
('портрет'), ('street'), ('архитектура'), ('природа'), ('вода');

-- Вставка локаций с правильными значениями для CHECK ограничений
INSERT INTO locations (name, description, coordinates, address, category_id, best_time_of_day, best_season, accessibility, difficulty_level, permission_required, created_by) VALUES

-- Природные локации
('Парк Сокольники', 
 'Один из старейших парков Москвы с живописными аллеями, прудами и розарием. Отличное место для портретной съемки и фотографий природы в городе.',
 ST_GeomFromText('POINT(37.6756 55.7958)', 4326), 
 'Сокольнический Вал, 1, стр. 1, Москва', 
 1, 'morning', 'spring', 'public_transport', 'easy', false, 1),

('Воробьевы горы', 
 'Знаменитая смотровая площадка с панорамным видом на Москву. Идеальное место для съемки городских пейзажей и закатов.',
 ST_GeomFromText('POINT(37.5443 55.7105)', 4326), 
 'Воробьевы горы, Москва', 
 3, 'evening', 'summer', 'public_transport', 'easy', false, 1),

('Парк Коломенское', 
 'Музей-заповедник с деревянными церквями и историческими постройками. Уникальное место для съемки русской архитектуры.',
 ST_GeomFromText('POINT(37.6692 55.6667)', 4326), 
 'Андропова просп., 39, Москва', 
 2, 'morning', 'spring', 'public_transport', 'easy', false, 2),

-- Архитектурные локации
('Красная площадь', 
 'Главная площадь России с собором Василия Блаженного, Кремлем и ГУМом. Классическое место для архитектурной съемки.',
 ST_GeomFromText('POINT(37.6204 55.7539)', 4326), 
 'Красная площадь, Москва', 
 2, 'morning', 'winter', 'public_transport', 'easy', false, 1),

('Москва-Сити', 
 'Деловой центр с современными небоскребами. Отличное место для съемки современной архитектуры и ночных видов.',
 ST_GeomFromText('POINT(37.5356 55.7495)', 4326), 
 'Пресненская наб., Москва', 
 3, 'night', 'autumn', 'public_transport', 'medium', false, 2),

('Храм Христа Спасителя', 
 'Кафедральный собор с красивой архитектурой и видом на Кремль. Популярное место для архитектурной и портретной съемки.',
 ST_GeomFromText('POINT(37.6047 55.7445)', 4326), 
 'ул. Волхонка, 15, Москва', 
 2, 'morning', 'spring', 'public_transport', 'easy', false, 3),

-- Городские виды
('Патриаршие пруды', 
 'Уютное место в центре Москвы с прудом и скамейками. Идеально для портретной съемки и street photography.',
 ST_GeomFromText('POINT(37.5947 55.7656)', 4326), 
 'Малая Бронная ул., Москва', 
 4, 'afternoon', 'summer', 'public_transport', 'easy', false, 3),

('Парк Горького', 
 'Центральный парк культуры и отдыха с современной инфраструктурой, фонтанами и видом на Москву-реку.',
 ST_GeomFromText('POINT(37.6017 55.7312)', 4326), 
 'ул. Крымский Вал, 9, Москва', 
 1, 'afternoon', 'summer', 'public_transport', 'easy', false, 4),

('Большой театр', 
 'Знаменитый театр с классической архитектурой. Отличное место для ночной съемки с подсветкой.',
 ST_GeomFromText('POINT(37.6192 55.7596)', 4326), 
 'Театральная пл., 1, Москва', 
 2, 'night', 'winter', 'public_transport', 'easy', false, 1),

('Новодевичий монастырь', 
 'Объект Всемирного наследия ЮНЕСКО с красивой архитектурой и прудом. Идеально для исторической съемки.',
 ST_GeomFromText('POINT(37.5564 55.7267)', 4326), 
 'Новодевичий пр., 1, Москва', 
 2, 'morning', 'autumn', 'public_transport', 'easy', false, 2);

-- Связи локаций с тегами
INSERT INTO location_tags (location_id, tag_id) VALUES
-- Сокольники
(1, 3), (1, 9), (1, 16), (1, 19),
-- Воробьевы горы  
(2, 1), (2, 3), (2, 12), (2, 6),
-- Коломенское
(3, 5), (3, 9), (3, 18), (3, 19),
-- Красная площадь
(4, 5), (4, 9), (4, 18), (4, 17),
-- Москва-Сити
(5, 6), (5, 1), (5, 14), (5, 15),
-- Храм Христа Спасителя
(6, 5), (6, 18), (6, 16), (6, 9),
-- Патриаршие пруды
(7, 20), (7, 16), (7, 17), (7, 10),
-- Парк Горького
(8, 3), (8, 7), (8, 2), (8, 19),
-- Большой театр
(9, 18), (9, 14), (9, 15), (9, 9),
-- Новодевичий монастырь
(10, 5), (10, 20), (10, 18), (10, 19);

-- Вставка отзывов
INSERT INTO reviews (location_id, user_id, text, rating) VALUES
(1, 2, 'Отличное место для утренней съемки! Много интересных ракурсов и хорошее освещение.', 5),
(2, 3, 'Потрясающий вид на город! Лучше приходить к закату, очень красивые кадры получаются.', 5),
(3, 4, 'Уникальная архитектура и история. Рекомендую для съемки русского стиля.', 4),
(4, 2, 'Классика! Обязательно для каждого фотографа. Рано утром меньше туристов.', 5),
(5, 3, 'Современная архитектура впечатляет. Ночью с подсветкой особенно красиво.', 4),
(6, 4, 'Величественное здание. Хорошо смотрится в любое время дня.', 4),
(7, 2, 'Уютное место для портретов. Особенно красиво летом с зеленью.', 4),
(8, 3, 'Большой парк с множеством локаций. Можно провести целый день съемки.', 5),
(9, 4, 'Архитектурная жемчужина. Ночная подсветка создает волшебную атмосферу.', 5),
(10, 2, 'Историческое место с особой атмосферой. Осенью особенно фотогенично.', 5);

-- Вставка фотографий (URL-ы для демонстрации)
INSERT INTO photos (location_id, user_id, url, description) VALUES
(1, 2, '/uploads/sokolniki_morning.jpg', 'Утренняя аллея в Сокольниках'),
(1, 3, '/uploads/sokolniki_pond.jpg', 'Пруд в парке Сокольники'),
(2, 2, '/uploads/vorobyovy_panorama.jpg', 'Панорама Москвы с Воробьевых гор'),
(2, 4, '/uploads/vorobyovy_sunset.jpg', 'Закат над Москвой'),
(3, 3, '/uploads/kolomenskoe_church.jpg', 'Церковь в Коломенском'),
(4, 2, '/uploads/red_square_morning.jpg', 'Красная площадь утром'),
(4, 4, '/uploads/red_square_cathedral.jpg', 'Собор Василия Блаженного'),
(5, 3, '/uploads/moscow_city_night.jpg', 'Москва-Сити ночью'),
(6, 2, '/uploads/christ_cathedral.jpg', 'Храм Христа Спасителя'),
(7, 4, '/uploads/patriarshie_summer.jpg', 'Патриаршие пруды летом');
